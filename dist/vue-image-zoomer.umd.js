(function(l,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(l=typeof globalThis!="undefined"?globalThis:l||self,e(l["vue-image-zoomer"]={},l.vue))})(this,function(l,e){"use strict";var P=(()=>`.VueHoverfade-enter-active,.VueHoverfade-leave-active{transition:opacity .5s}.VueHoverfade-enter,.VueHoverfade-leave-to{opacity:0}.vh--outer[v-cloak]{display:none}.vh--flex{display:flex}.vh--jc{justify-content:center}.vh--ai{align-items:center}.vh--rel{position:relative}.vh--abs{position:absolute}.vh--outer{display:inline-block;line-height:0;font-family:Arial,Helvetica,sans-serif;color:#fff}.vh--holder{overflow:hidden;touch-action:manipulation;cursor:zoom-in;align-items:flex-start}.vh--image{top:0;left:0;pointer-events:none}.vh--message{background-color:#000000a6;padding:8px 15px;border-radius:50px;text-align:center;line-height:initial}.vh--message-top{top:20px}.vh--message-bottom{bottom:20px}.vh--icon{transform:rotate(-45deg);display:block;font-size:20px;margin-right:5px;line-height:20px}.vh--close{line-height:0;background-color:#000000a6;border-radius:50px;font-size:23px;cursor:pointer;height:28px;width:28px}.vh--top-left{top:5px;left:5px}.vh--top-right{top:5px;right:5px}.vh--top-center{top:5px;left:50%;transform:translate(-50%)}.vh--bottom-left{bottom:5px;left:5px}.vh--bottom-right{bottom:5px;right:5px}.vh--bottom-center{bottom:5px;left:50%;transform:translate(-50%)}.vh--loading-o{top:0;left:0;width:100%;height:100%;background-color:#000000a6;pointer-events:none}.vh--loading{top:50%;left:50%;font-size:60px;line-height:60px;animation:vuehoverzoomspin 1s linear infinite;width:36px;height:70px}.vh--none{opacity:0}.vh--no-click img{pointer-events:none}@keyframes vuehoverzoomspin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`)(),c=(t,o)=>{const s=t.__vccOpts||t;for(const[h,i]of o)s[h]=i;return s};const m={name:"VueImageZoomer",directives:{clickOutside:{mounted(t,o){t.clickOutsideEvent=function(s){t==s.target||t.contains(s.target)||o.value(s,t)},document.body.addEventListener("click",t.clickOutsideEvent)},unmounted(t){document.body.removeEventListener("click",t.clickOutsideEvent)}}},data(){return{touch:!1,zoomed:!1,x:0,y:0,touchPosition:0,origX:0,origY:0,offsetLeft:0,offsetTop:0,zoomWidth:0,zoomHeight:0,options:{zoomAmount:0,zoom:!1,zoomWebp:!1},loaded:!1,loading:!1,webp_supported:!1,cx:0,cy:0}},props:{regular:String,regularWebp:String,zoom:String,zoomWebp:String,imgClass:{type:String,default:""},alt:String,zoomAmount:{type:Number,default:0},clickZoom:Boolean,hoverMessage:{type:String,default:'<span class="vh--icon">&#9906;</span> Hover to zoom'},touchMessage:{type:String,default:'<span class="vh--icon">&#9906;</span> Tap to zoom'},clickMessage:{type:String,default:'<span class="vh--icon">&#9906;</span> Click to zoom'},closePos:{type:String,default:"top-left"},messagePos:{type:String,default:"bottom"},showMessage:{type:Boolean,default:!0},showMessageTouch:{type:Boolean,default:!0},breakpoints:Array,touchZoomPos:{type:Array,default(){return[.5,.5]}},lazyload:Boolean,rightClick:Boolean},watch:{propChanges(){this.get_options()}},computed:{propChanges(){return`${this.breakpoints}|${this.regular}|${this.regularWebp}|${this.zoom}|${this.zoomAmount}|${this.zoomWebp}`}},mounted(){this.check_webp_feature("lossy",(s,h)=>{h&&(this.webp_supported=!0)}),this.get_options(),("ontouchstart"in window||navigator.msMaxTouchPoints)&&(this.touch=!0);let t,o;this.$refs["vue-hover-zs"].addEventListener("touchstart",s=>{if(this.zoomed){s.cancelable&&s.preventDefault();let h=s.changedTouches[0];t=h.pageX-this.cx,o=h.pageY-this.cy}}),this.$refs["vue-hover-zs"].addEventListener("touchmove",s=>{if(this.zoomed){let h=s.changedTouches[0];this.x=h.pageX-t,this.y=h.pageY-o,h.pageX-t<=this.origX-this.zoomWidth&&(this.x=this.origX-this.zoomWidth),h.pageX-t>=0&&(this.x=-1),h.pageY-o<=this.origY-this.options.zoomAmount*this.origY&&(this.y=this.origY-this.options.zoomAmount*this.origY),h.pageY-o>=0&&(this.y=-1),this.touchPosition="translate3d("+this.x+"px,"+this.y+"px,0)"}}),this.$refs["vue-hover-zs"].addEventListener("touchend",s=>{if(this.zoomed){let h=s.changedTouches[0];this.cx=h.pageX-t,this.cy=h.pageY-o}})},created(){window.addEventListener("resize",this.debounce(()=>{this.resize()},500))},unmounted(){window.removeEventListener("resize",this.resize())},methods:{debounce(t,o){let s;return(...h)=>{const i=this;clearTimeout(s),s=setTimeout(()=>t.apply(i,h),o)}},get_options(){this.options.zoomAmount=this.zoomAmount,this.options.zoom=this.zoom,this.options.zoomWebp=this.zoomWebp,this.zoom||(this.options.zoom=this.regular,this.options.zoomAmount=2),!this.zoomWebp&&this.regularWebp&&(this.options.zoomWebp=this.regularWebp,this.options.zoomAmount=2),this.resize()},resize(){this.zoomed=!1,this.loaded=!1},check_webp_feature(t,o){let s={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"},h=new Image;h.onload=()=>{let i=h.width>0&&h.height>0;o(t,i)},h.onerror=()=>{o(t,!1)},h.src="data:image/webp;base64,"+s[t]},loadImage(t,o){const s=new Image;s.onload=o,s.src=t},loadZoom(){this.offset(),this.options.zoomAmount!=0&&(this.zoomWidth=this.origX*this.options.zoomAmount,this.zoomHeight=this.origY*this.options.zoomAmount,this.touch&&this.mobilePos()),this.loaded?(this.zoomed=!0,this.options.zoomAmount==0&&(this.options.zoomAmount=this.zoomWidth/this.origX)):this.zoomLoad()},zoomLoad(){(!this.clickZoom||this.touch)&&(this.loading=!0);let t=this.options.zoom;this.breakpoints&&this.breakpoints.forEach(o=>{window.innerWidth>=o.width&&(o.zoom?t=o.zoom:t=o.regular)}),this.webp_supported&&this.options.zoomWebp&&(t=this.options.zoomWebp,this.breakpoints&&this.breakpoints.forEach(o=>{window.innerWidth>=o.width&&(o.zoomWebp?t=o.zoomWebp:t=o.regularWebp)})),this.loadImage(t,o=>{this.options.zoomAmount==0&&(this.zoomWidth=o.target.width,this.zoomHeight=o.target.height,this.options.zoomAmount=o.target.width/this.origX),this.loaded=!0,this.loading=!1,(!this.clickZoom||this.touch)&&(this.zoomed=!0,this.mobilePos())})},isZoom(t,o){(o=="hover"&&!this.clickZoom&&!this.touch||o=="click"&&(this.clickZoom||this.touch)||typeof t=="object")&&(this.zoomed=!1,t==!0&&this.loadZoom())},mobilePos(){let t=(this.zoomWidth-this.origX)*this.touchZoomPos[0],o=(this.zoomHeight-this.origY)*this.touchZoomPos[1];(this.touchZoomPos[0]>1||this.touchZoomPos[0]<0||this.touchZoomPos[1]>1||this.touchZoomPos[1]<0)&&(t=0,o=0),this.cx=-t,this.cy=-o,this.x=-t,this.y=-o,this.touchPosition="translate3d(-"+t+"px,-"+o+"px,0)"},offset(){this.origX=parseFloat(this.$refs["vue-hover-zs"].offsetWidth),this.origY=parseFloat(this.$refs["vue-hover-zs"].offsetHeight)},mousePos(t){this.offsetLeft=window.pageXOffset+this.$refs["vue-hover-zs"].getBoundingClientRect().left,this.offsetTop=window.pageYOffset+this.$refs["vue-hover-zs"].getBoundingClientRect().top,!this.touch&&!this.loading&&(this.loaded?(this.x=(t.pageX-this.offsetLeft)*(this.options.zoomAmount-1),this.y=(t.pageY-this.offsetTop)*(this.options.zoomAmount-1)):(this.offset(),this.zoomLoad()))}}},d={class:"vh--outer vh--rel"},g=["srcset","media"],p=["srcset","media"],f=["srcset"],u=["loading","src","alt"],z={key:0},k=["srcset","media"],v=["srcset","media"],y=["srcset","media"],x=["srcset","media"],b=["src"],_=["src"],w=["src"],B=["innerHTML"],A=["innerHTML"],E=["innerHTML"],W={key:1,class:"vh--loading-o vh--abs vh--flex vh--jc vh--ai"},C=[e.createElementVNode("div",{class:"vh--loading",innerHTML:"\u25E0"},null,-1)];function T(t,o,s,h,i,r){const V=e.resolveDirective("click-outside");return e.withDirectives((e.openBlock(),e.createElementBlock("div",d,[e.createElementVNode("div",{class:e.normalizeClass(["vh--holder vh--rel vh--flex vh--jc",{"vh--no-click":!s.rightClick}]),onMouseenter:o[0]||(o[0]=n=>r.isZoom(!0,"hover")),onMouseleave:o[1]||(o[1]=n=>r.isZoom(!1,"hover")),onMousemove:o[2]||(o[2]=(...n)=>r.mousePos&&r.mousePos(...n)),ref:"vue-hover-zs",onClick:o[3]||(o[3]=n=>r.isZoom(!i.zoomed,"click"))},[e.createElementVNode("picture",{class:e.normalizeClass({"vh--none":i.zoomed})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.breakpoints,n=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:n.width},[n.regularWebp?(e.openBlock(),e.createElementBlock("source",{key:0,srcset:n.regularWebp,type:"image/webp",media:"(min-width:"+n.width+"px)"},null,8,g)):e.createCommentVNode("",!0),n.regular?(e.openBlock(),e.createElementBlock("source",{key:1,srcset:n.regular,media:"(min-width:"+n.width+"px)"},null,8,p)):e.createCommentVNode("",!0)],64))),128)),s.regularWebp?(e.openBlock(),e.createElementBlock("source",{key:0,srcset:s.regularWebp,type:"image/webp"},null,8,f)):e.createCommentVNode("",!0),e.createElementVNode("img",{loading:s.lazyload?"lazy":"eager",src:s.regular,class:e.normalizeClass(s.imgClass),alt:s.alt},null,10,u)],2),i.zoomed?(e.openBlock(),e.createElementBlock("picture",z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.breakpoints,n=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:n.width},[n.zoomWebp?(e.openBlock(),e.createElementBlock("source",{key:0,srcset:n.zoomWebp,type:"image/webp",media:"(min-width:"+n.width+"px)"},null,8,k)):n.regularWebp?(e.openBlock(),e.createElementBlock("source",{key:1,srcset:n.regularWebp,type:"image/webp",media:"(min-width:"+n.width+"px)"},null,8,v)):e.createCommentVNode("",!0),n.zoom?(e.openBlock(),e.createElementBlock("source",{key:2,srcset:n.zoom,media:"(min-width:"+n.width+"px)"},null,8,y)):n.regular?(e.openBlock(),e.createElementBlock("source",{key:3,srcset:n.regular,media:"(min-width:"+n.width+"px)"},null,8,x)):e.createCommentVNode("",!0)],64))),128)),i.options.zoomWebp?(e.openBlock(),e.createElementBlock("source",{key:0,src:i.options.zoomWebp,type:"image/webp"},null,8,b)):e.createCommentVNode("",!0),i.touch?(e.openBlock(),e.createElementBlock("img",{key:2,src:i.options.zoom,class:"vh--image vh--abs",style:e.normalizeStyle("width:"+i.zoomWidth+"px;transform:"+i.touchPosition)},null,12,w)):(e.openBlock(),e.createElementBlock("img",{key:1,src:i.options.zoom,class:"vh--image vh--abs",style:e.normalizeStyle({width:i.zoomWidth+"px",transform:"translate(-"+i.x+"px,-"+i.y+"px)"})},null,12,_))])):e.createCommentVNode("",!0),e.createVNode(e.Transition,{name:"VueHoverfade"},{default:e.withCtx(()=>[!i.zoomed&&!i.loading&&!s.clickZoom&&!i.touch&&s.showMessage?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["vh--message vh--abs vh--flex vh--jc vh--ai","vh--message-"+s.messagePos]),innerHTML:s.hoverMessage},null,10,B)):!i.zoomed&&!i.loading&&!i.touch&&s.showMessage?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["vh--message vh--abs vh--flex vh--jc vh--ai","vh--message-"+s.messagePos]),innerHTML:s.clickMessage},null,10,A)):!i.zoomed&&!i.loading&&i.touch&&s.showMessageTouch?(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["vh--message vh--abs vh--flex vh--jc vh--ai","vh--message-"+s.messagePos]),innerHTML:s.touchMessage},null,10,E)):e.createCommentVNode("",!0)]),_:1})],34),e.createVNode(e.Transition,{name:"VueHoverfade"},{default:e.withCtx(()=>[i.touch&&i.zoomed&&i.loaded?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["vh--close vh--abs vh--flex vh--jc vh--ai","vh--"+s.closePos]),onClick:o[4]||(o[4]=e.withModifiers(n=>i.zoomed=!1,["stop"])),innerHTML:"\xD7"},null,2)):i.loading?(e.openBlock(),e.createElementBlock("div",W,C)):e.createCommentVNode("",!0)]),_:1})])),[[V,r.isZoom]])}var a=c(m,[["render",T]]),M={install:(t,o)=>{t.component("VueImageZoomer",a)}};l.VueImageZoomer=a,l.default=M,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
